'use client';import Shell from '@/components/Shell';import { useEffect,useState } from 'react';import { useToast } from '@/components/ToastProvider';export default function Home(){const [email,setEmail]=useState('');const [p1,setP1]=useState('');const [p2,setP2]=useState('');const [err,setErr]=useState('');const toast=useToast();useEffect(()=>{const uid=localStorage.getItem('cashbook:userId');if(uid) location.href='/dashboard';},[]);const signup=async()=>{setErr('');if(!email.includes('@'))return setErr('Enter a valid email.');if(p1.length<4)return setErr('Use at least 4 characters.');if(p1!==p2)return setErr('Passwords do not match.');const r=await fetch('/api/auth/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password:p1})});const j=await r.json();if(!r.ok)return setErr(j.error||'Failed');localStorage.setItem('cashbook:userId',j.userId);toast.show('Account created successfully.');setTimeout(()=>location.href='/dashboard',400);};return(<Shell><div className="card max-w-md mx-auto text-center"><img src="/logo.png" className="h-16 mx-auto mb-4" alt="logo"/><h1 className="text-2xl font-semibold mb-4">Create your account</h1><div className="space-y-3"><input className="input" placeholder="Email" value={email} onChange={e=>setEmail(e.target.value)}/><input type="password" className="input" placeholder="Password" value={p1} onChange={e=>setP1(e.target.value)}/><input type="password" className="input" placeholder="Confirm password" value={p2} onChange={e=>setP2(e.target.value)}/>{err&&<div className="text-sm text-red-400">{err}</div>}<button className="btn btn-primary w-full" onClick={signup}>Sign up</button><div className="text-sm text-neutral-400">Already have an account? <a className="link" href="/login">Login</a></div></div></div></Shell>);}